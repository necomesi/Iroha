<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Iroha.Redirect</title>
<link rel="stylesheet" href="../../_css/base.css">
</head>
<body>


<h1>Iroha.Redirect</h1>

<ul id="to-index">
	<li><a href="../index.html">Necomeshi JavaScript Library (Iroha)</a></li>
</ul>

<h2 id="overview">概要</h2>

<p>ページリダイレクトを JS で発生させます。ちょっとした小細工ができる。</p>

<h2 id="coverage">動作確認ブラウザ</h2>

<p>(fixme)</p>

<h2 id="deployment">実装ファイル配置</h2>

<dl>
	<dt>主ファイル</dt>
	<dd>
		<ul>
			<li><a href="iroha.redirect.js">iroha.redirect.js</a></li>
		</ul>
	</dd>
	<dt>依存ファイル（主ファイルの動作に必要） </dt>
	<dd>
		<ul>
			<li>なし</li>
		</ul>
	</dd>
</dl>

<h3>HTML への組み込み</h3>

<pre>&lt;head&gt;
    :
    &lt;script src=&quot;path/to/<em>iroha.redirect.js</em>&quot;&gt;&lt;/script&gt;
    :
&lt;/head&gt;</pre>

<h2 id="definitions">リダイレクト設定</h2>

<p>iroha.redirect.js を <code>&lt;script&gt;</code> 要素で読み込む際の <code>src</code> 属性にクエリ文字列をつけることで、リダイレクトの設定を行います。</p>
<p><code>パラメータ名=値</code> を <code>;</code> 区切りで記述します。パラメータ名の出現順は自由。</p>

<table summary="引数について" class="parameters">
<thead>
<tr><th>パラメータ名</th><th>説明</th><th>任意性</th></tr>
</thead>
<tbody>
<tr><td><var>url</var></td><td>リダイレクト先。完全 URL もしくは相対 URL 。<br>この指定が無い場合には何も起きません。他パラメータの指定もすべて無効になります。<br>
なお、 URL 中に <code>;</code> は使えません。</td><td>必須</td></tr>
<tr><td><var>hide</var></td><td>リダイレクトするまでの間、ページ全体の内容を隠すかどうか。 <code>"yes"</code> で「隠す」。</td><td>任意</td></tr>
<tr><td><var>delay</var></td><td>リダイレクトするまでの遅延。単位は秒。無指定時は 0 秒でリダイレクト。</td><td>任意</td></tr>
<tr><td><var>appear</var></td><td> <code>hide=yes</code> を指定しているときのみ有意。<br>
リダイレクト開始後、ページ全体が再表示されるまでの秒数。<br>
無指定時、あるいは 0 秒を指定したときは再表示されない。</td><td>任意</td></tr>
</tbody>
</table>

<h3>記述例</h3>

<ul>
<li><code>&lt;script src=&quot;<em>iroha.redirect.js?url=hoge.html</em>&quot;&gt;&lt;/script&gt;</code></li>
<li><code>&lt;script src=&quot;<em>iroha.redirect.js?url=../fuga.html;delay=1</em>&quot;&gt;&lt;/script&gt;</code></li>
<li><code>&lt;script src=&quot;<em>iroha.redirect.js?url=http://www.example.com/;hide=yes;delay=0;appear=3</em>&quot;&gt;&lt;/script&gt;</code></li>
</ul>

<h2 id="examples">動作例</h2>

<dl>
	<dt><a href="_docfiles/sample1.html">サンプルページ1</a></dt>
	<dd><code>&lt;script src=&quot;<em>iroha.redirect.js?url=success.html;delay=3</em>&quot;&gt;&lt;/script&gt;</code></dd>
	<dt><a href="_docfiles/sample2.html">サンプルページ2</a></dt>
	<dd><code>&lt;script src=&quot;<em>iroha.redirect.js?url=success.html;hide=yes;delay=3;appear=2</em>&quot;&gt;&lt;/script&gt;</code></dd>
</dl>

<h2 id="attention">注意事項</h2>

<p>このスクリプトは、 HTTP ステータスコードによるリダイレクト、HTML の "meta refresh" によるリダイレクト、ユーザに遷移先リンクを意識的に押下させる、等のあるべきリダイレクト手法が利用できない条件下で、それらの代替策として利用するものです。よってアクセシビリティの確保にはより意識的になる必要があります。</p>
<p>リダイレクト先 URL へのリンクをページ中に設置することは、最低限行わなければならないと考えます。たとえばそうした上で、「リダイレクトするまでの間、ページ全体を隠す」オプションを設定してそれを隠しておき、しかし一定時間のタイムアウトで再表示されるような JS 処理を追加するなど、するとよいでしょう。</p>

<address>written by Koji Kasugai (<a href="mailto:kojika@necomesi.jp">kojika@necomesi.jp</a>) 2013-03-16</address>

</body>
</html>
